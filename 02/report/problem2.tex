\begin{problem}
	\label{problem_2}
	Μια αλυσίδα fast food πρόκειται να ανοίξει μια σειρά από εστιατόρια κατά μήκος της Εγνατίας. Οι n πιθανές τοποθεσίες έχουν αποστάσεις από την αρχή της Εγνατίας σε αύξουσα σειρά $m_1,m_2,\ldots,m_n$ σε μέτρα. Το προσδοκώμενο κέρδος από το άνοιγμα ενός εστιατορίου στην τοποθεσία $i$ είναι $p_i$, $i=1,2,\ldots n$. Σε κάθε τοποθεσία η αλυσίδα μπορεί να ανοίξει μόνο ένα εστιατόριο. Επιπλέον, δύο εστιατόρια πρέπει να απέχουν μεταξύ τους τουλάχιστον $k$ μέτρα.
\end{problem}

\subsection{Μέγιστο προσδοκώμενο κέρδος}

	\subsubsection{Βέλτιστη υποδομή}

		Συμβολίζουμε το μέγιστο προδοκώμενο κέρδος, έχοντας στη διάθεσή μας τις τοποθεσίες $m_1,\ldots,m_i$, με $R_i$. Χρειάζεται να σπάσουμε το πρόβλημα στα εξής δύο· στο μέγιστο προσδοκώμενο κέρδος για το σύνολο των τοποθεσιών πριν την $m_i$ και το προσδοκώμενο κέρδος της τοποθεσίας $m_i$. Αρχικά, υποθέτουμε πως $m_i-m_{j}\geqslant k$. Τότε, $R_i=R_j+p_i$ όπου $R_j$ είναι το μέγιστο κέρδος έχοντας στη διάθεσή μας τις τοποθεσίες $m_1,\ldots,m_{i-1}$ και $p_i$ το προσδοκώμενο κέρδος ενός εστιατορίου στην τοποθεσία $m_i$. Θα αποδείξουμε πως η $R_j$ είναι μέρος της $R_i$.\par
		\vspace*{6pt}
		\textsl{Έστω πως $R_j$ δεν είναι το μέγιστο προσδοκώμενο κέρδος έχοντας στη διάθεσή μας τις τοποθεσίες $m_1,\ldots,m_{i-1}$. Τότε, υπάρχει μία τιμή $R_f>R_j$. Αυτό συνεπάγεται πως υπάρχει μία νέα λύση $R_i^{\prime}$ η οποία είναι μεγαλύτερη της μέγιστης. Άτοπον. }$\blacksquare$\par
		\vspace*{6pt}
		Τώρα θα εξετάσουμε τη γενική περίπτωση όπου η συνθήκη $m_i-m_{j}\geqslant k$ δεν ικανοποιείται απαραίτητα. Στην περίπτωση αυτή η προηγούμενη λύση $\(R_j+p_i\)$ παίρνει τη μορφή $R_j+p_i\cdot\delta[m_i,m_{j}]$, όπου $\delta:[m_1,\ldots,m_n]\times[m_1,\ldots,m_n]\to\left\{0,1\right\}$ με τύπο
		\begin{equation*}
			\delta[m_x,m_y]=\begin{cases}
				0,&\text{if}\;m_x-m_y<k\\
				1,&\text{if}\;m_x-m_y\geqslant k\\
			\end{cases}.
		\end{equation*}
		Στην περίπτωση όπου $\delta[m_i,m_{i-1}]=0$, τότε δύναται να είναι $p_i>R_j$. Επομένως, η βέλτιστη υποδομή είναι $R_i=\max{\left\{p_i,R_j+p_i\cdot\delta(m_i,m_{j})\right\}}$.

	\subsubsection{Αναδρομική λύση}

		Εκφράζουμε την βέλτιστη λύση ενός προβλήματος μεγέθους $i$ συναρτήσει των βέλτιστων λύσεων υποπροβλημάτων μεγέθους $j<i$. Στην προκειμένη αναζητούμε το μέγιστο προσδοκώμενο κέρδος, $R_i$, όταν είναι διαθέσιμες οι τοποθεσίες $m_j,\ldots,m_i,\;1\leqslant j\leqslant i\leqslant n$. Θέτωντας $R_1=p_1$ για $j=i=1$, για $m_j,\ldots,m_i,\;1\leqslant j<i\leqslant n$ είναι
		\begin{equation}
			\label{eq:recursive_sol}
			\mathclap{R_i=\max{\left\{p_i,\max_{j<i}{\left\{R_j+\delta[m_i,m_j]\cdot p_i\right\}}\right\}}}
		\end{equation}

	\subsubsection{Υπολογισμός βέλτιστης λύσης}

		Η βέλτιστη λύση κάθε υποπροβλήματος αποθηκεύεται σε έναν πίνακα $R$. Επομένως, λύνοντας τα προβλήματα κατά αύξουσα σειρά ως προς το μέγεθός τους, κάθε αναδρομή δεν χρειάζεται να υπολογίσει εκ νέου την βέλτιση λύση για κάθε υποπρόβλημα αλλά να την αναζητήσει στον πίνακα $R$. Βάσει της σχέσης \eqref{eq:recursive_sol} προκύπτει ο Αλγόριθμος \ref{alg:2_2}.
	% Έστω η συνάρτηση $R:[1,\ldots,n]\to\mathbb{R}_{+}$ η οποία επιστρέφει το μέγιστο προσδοκώμενο κέρδος ανοίγοντας εστιατόρια σε τοποθεσίες επιλεγμένες από $[m_1,\ldots,m_j]$. Έστω μία οποιαδήποτε τοποθεσία $i$ σε απόσταση $m_i$ από την αρχή της Εγνατίας. Το κέρδος του εστιατορίου της τοποθεσίας $i$ είναι $p_i$. Το μέγιστο προσδοκώμενο κέρδος ανοίγοντας εστιατόρια έως και την τοποθεσία $i$ εξαρτάται από την τιμή $p_i$, την τιμή $R[j], \forall j<i$ και εάν οι απόστάσεις $m_i$ και $m_j$ ικανοποιούν τη συνθήκη $m_i-m_j\geqslant k$.\par
	% Για να βρεθεί το μέγιστο προσδοκώμενο κέρδος $R(i)$ επιλέγεται το μέγιστο μεταξύ του $p_i$, δηλαδή του κέρδους ανοίγοντας μόνο ένα εστιατόριο, αυτό στην τοποθεσία $m_i$ και μεγίστου του αθροίσματος του μεγίστου προσδοκώμενου κέρδους $R(j)$ για κάθε τοποθεσία $j<i$ συν του κέρδους $p_i$,εάν φυσικά πληρούται η προϋπόθεση $m_i-m_j\geqslant k$. Αυτό σημαίνει πως δύναται το μέγιστο κέρδος έως και την τοποθεσία $i$ να προκύπτει χωρίς να υπάρχει εστιατόριο στο σημείο $m_i$. Είναι προφανές πως κάθε βέλτιστη λύση για ένα πρόβλημα μεγέθους $i$ απαιτεί την γνώση των βέλτιστων λύσεων των προβλημάτων μεγέθους μικρότερου του $i$.\par
	% Ορίζεται $\delta:[m_1,\ldots,m_i]\times[m_1,\ldots,m_i]\to\left\{0,1\right\}$ νέα συνάρτηση τέτοια ώστε
	% \begin{equation*}
	% 	\delta(m_i,m_j)=\begin{cases}
	% 		0,&\text{if}\;m_i-m_j<k\\
	% 		1,&\text{if}\;m_i-m_j\geqslant k\\
	% 	\end{cases}
	% \end{equation*}
	% Τότε, το μέγιστο προσδοκώμενο κέρδος για κάθε πρόβλημα μεγέθους $i$ είναι
	% \begin{equation}
	% 	\label{eq:problem2:recursive_revenue}
	% 	\mathclap{R(i)=\max{\left\{p_i,\max_{j<i}{\left\{R(j)+\delta(m_i,m_j)\cdot p_i\right\}}\right\}}}
	% \end{equation}

	% Η σχέση \eqref{eq:problem2:recursive_revenue} μας οδηγεί στον ακόλουθο αλγόριθμο για την εύρεση του μέγιστου προσδοκώμενου κέρδους όταν δύναται να χτιστούν εστιατόρια σε $n$ διαφορετικές τοποθεσίες.

	\texttt{\input{pseudocode/a2p2.tex}}

\subsection{Ορθότητα αλγορίθμου}

\subsection{Χρόνος εκτέλεσης αλγορίθμου}

Στην γραμμή $2$ του Αλγορίθμου \ref{alg:2_2} υπολογίζεται το μέγεθος του πίνακα $p$ σε σταθερό χρόνο και το αποτέλεσμα καταχωρείται σε μία νέα μεταβλητή $n$ σε σταθερό χρόνο $\bigO(1)$.\par
Στην γραμμή $3$ του Αλγόριθμος \ref{alg:2_2} δημιουργείται ένας νέος κενός πίνακας μεγέθους $n$ σε σταθερό χρόνο $\bigO(1)$.\par
Το σώμα του επαναληπτικού βρόχου των γραμμών $4-5$ εκτελείται $n$ φορές. Σε κάθε εκτέλεση της γραμμής $5$ πραγματοποιείται καταχώρηση μίας τιμής σε κάποια θέση του πίνακα $R$ το οποίο απαιτεί σταθερό χρόνο $\bigO(1)$. Επομένως, συνολικά η $\tw{for}$ των γραμμών $4-5$ χρειάζεται $\bigO(n)$ χρόνο.\par
Το σώμα του $\tw{for}$ της γραμμής $6$ εκτελείται $n-1$ φορές. Το σώμα του $\tw{for}$ της γραμμής $7$ εκτελείται $2\cdot(n-1)$ φορές. Ο έλεγχος της συνθήκης της γραμμής $8$ γίνεται σε σταθερό χρόνο $\bigO(1)$. Η γραμμή $9$ πρώτα υπολογίζει το άθροισμα $R[j]+p[i]$ σε σταθερό χρόνο. Έπειτα, υπολογίζει το μέγιστο μεταξύ των $p[i]$ και $R[j]+p[i]$ σε σταθερό χρόνο και τέλος καταχωρεί το αποτέλεσμα στον πίνακα $R$ σε επίσης σταθερό χρόνο. Συνεπώς, η γραμμή $9$ εκτελεί σειριακά εργασίες σταθερού χρόνου. Αυτό σημαίνει πως ο χρόνος εκτέλεσής της είναι $\bigO(1)$.\par
Η γραμμή $11$ εκτελεί τις παρόμοιες ενέργειες με την γραμμή $9$ πάνω σε διαφορετικές τιμές. Επομένως, η ανάλυση της προηγούμενης παραγράφου για τη γραμμή $9$ εφαρμόζεται και για την γραμμή $11$ και προκύπτει πως ο χρόνος εκτέλεσής της είναι $\bigO(1)$.\par
Βάσει των παραπάνω ο συνολικός χρόνος εκτέλεσης του Αλγορίθμου \ref{alg:2_2} είναι $T(n)=\bigO(1)+n\cdot\bigO(1)+(n-1)\cdot\left[(n-2)\cdot\bigO(1)+\bigO(1)\right]$. Δηλαδή,
\begin{equation}
	T(n)=\bigO(n^2).
\end{equation}